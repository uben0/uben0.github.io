<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Tutoriel Rust</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
<a href="index.html#c
35
" class="index-link">← retour</a>
<h1 id="utiliser-un-itérateur">Utiliser un itérateur</h1>
<p>Le trait <code>Iterator</code> vient avec pleins de méthodes et autres outils.</p>
<h2 id="ignorer">Ignorer</h2>
<p>On peut passer les n-premiers éléments d’un itérateur.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> <span class="pp">Fibonacci::</span>new()<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> fib <span class="op">=</span> fib<span class="op">.</span>skip(<span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;fibonacci(11) = {:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span></code></pre></div>
<h2 id="de-dix-en-dix">De dix en dix</h2>
<p>On peut soter par pas de n-éléments.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> <span class="pp">Fibonacci::</span>new()<span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> fib <span class="op">=</span> fib<span class="op">.</span>step_by(<span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;fibonacci(0) = {:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;fibonacci(10) = {:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;fibonacci(20) = {:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span></code></pre></div>
<h2 id="borner">Borner</h2>
<p>On peut limiter le nombre d’éléments.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> <span class="pp">Fibonacci::</span>new()<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> fib <span class="op">=</span> fib<span class="op">.</span>take(<span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span></code></pre></div>
<pre><code>Some(0)
Some(1)
Some(1)
None</code></pre>
<h2 id="maper">Maper</h2>
<p>On peut modifer les éléments un à un. Ici, multiplier par <code>10</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> <span class="pp">Fibonacci::</span>new()<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> fib <span class="op">=</span> fib<span class="op">.</span>map(<span class="op">|</span>n<span class="op">|</span> n <span class="op">*</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span></code></pre></div>
<pre><code>Some(0)
Some(10)
Some(10)
Some(20)</code></pre>
<p>On vera plus tard la notation <code>|n| n * 10</code>.</p>
<h2 id="combinaison">Combinaison</h2>
<p>On peut combiner tous ce qu’on a vu.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> <span class="pp">Fibonacci::</span>new()<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> fib<span class="op">.</span>map(<span class="op">|</span>n<span class="op">|</span> n <span class="op">*</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> fib<span class="op">.</span>step_by(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> fib <span class="op">=</span> fib<span class="op">.</span>skip(<span class="dv">8</span>)<span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> fib <span class="op">=</span> fib<span class="op">.</span>take(<span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span></code></pre></div>
<pre><code>Some(9870)
Some(25840)
Some(67650)
None</code></pre>
<p>Toute les méthodes que l’on utilise absorde l’itérateur dans un nouvel itérateur. Seul le dernier, celui sur le quel on appelle <code>next</code>, a besoins d’être mutable.</p>
<p>On peut réécrire le code précédent sous une forme plus compacte.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> fib <span class="op">=</span> <span class="pp">Fibonacci::</span>new()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span>map(<span class="op">|</span>n<span class="op">|</span> n <span class="op">*</span> <span class="dv">10</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span>step_by(<span class="dv">2</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span>skip(<span class="dv">8</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span>take(<span class="dv">3</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> fib<span class="op">.</span>next())<span class="op">;</span></span></code></pre></div>
<h2 id="des-couches">Des couches</h2>
<p>Chaque appel à ces méthode rajoute une couche, on peut voir ça comme les couches d’un ognon. À la fin le type de <code>fib</code> est :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Take<span class="op">&lt;</span> Skip<span class="op">&lt;</span> StepBy<span class="op">&lt;</span> Map<span class="op">&lt;</span> Fibonacci <span class="op">&gt;</span> <span class="op">&gt;</span> <span class="op">&gt;</span> <span class="op">&gt;</span></span></code></pre></div>
<p>Les types <code>Take</code>, <code>Skip</code>, <code>StepBy</code> et <code>Map</code> sont génériques. On a donc un générique de générique de générique de générique, et ça fonctionne à la perfection.</p>
<h2 id="boucle-for">Boucle for</h2>
<p>On peut utiliser la boucle for pour itérer sur un itérateur.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> n <span class="kw">in</span> <span class="pp">Fibonacci::</span>new() <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> n)<span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Mais c’est une boucle est infinie, car la boucle <code>for</code> ne s’arrête que lorsque l’itérateur a retourné un <code>None</code>. On peut utiliser <code>take</code> pour limiter le nombre d’éléments.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> n <span class="kw">in</span> <span class="pp">Fibonacci::</span>new()<span class="op">.</span>take(<span class="dv">10</span>) <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> n)<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="la-documentation">La documentation</h2>
<p>Tout est dans la documentation, il faut lire la documentation. Pour rappel, on ouvre la documentation en éxécutant :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rustup</span> doc <span class="at">--std</span></span></code></pre></div>
<p>Souviens toi de cette abréviation, c’est la réponse à tous les problèmes :</p>
<pre><code>RTFM = Read The Fucking Manual</code></pre>
    </body>
</html>